if(!window.SIGNAL)window.SIGNAL="----seadragon----";Type.registerNamespace("AjaxControlToolkit.Seadragon");Type.registerNamespace("Seadragon");AjaxControlToolkit.Seadragon.ControlAnchor=function(){throw Error.invalidOperation();};AjaxControlToolkit.Seadragon.ControlAnchor.prototype={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};AjaxControlToolkit.Seadragon.ControlAnchor.registerEnum("AjaxControlToolkit.Seadragon.ControlAnchor",false);Seadragon.ControlAnchor=AjaxControlToolkit.Seadragon.ControlAnchor;AjaxControlToolkit.Seadragon.OverlayPlacement=function(){throw Error.invalidOperation();};AjaxControlToolkit.Seadragon.OverlayPlacement.prototype={CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8};AjaxControlToolkit.Seadragon.OverlayPlacement.registerEnum("AjaxControlToolkit.Seadragon.OverlayPlacement",false);Seadragon.OverlayPlacement=AjaxControlToolkit.Seadragon.OverlayPlacement;AjaxControlToolkit.Seadragon.NavControl=function(a){this._group=null;this._zooming=false;this._zoomFactor=null;this._lastZoomTime=null;this._viewer=a;this.config=this._viewer.config;this.elmt=null;this.initialize()};AjaxControlToolkit.Seadragon.NavControl.prototype={initialize:function(){var d=Function.createDelegate(this,this._beginZoomingIn),b=Function.createDelegate(this,this._endZooming),f=Function.createDelegate(this,this._doSingleZoomIn),c=Function.createDelegate(this,this._beginZoomingOut),e=Function.createDelegate(this,this._doSingleZoomOut),h=Function.createDelegate(this,this._onHome),g=Function.createDelegate(this,this._onFullPage),a=this._viewer.config.navImages,l=$create(AjaxControlToolkit.Seadragon.Button,{config:this._viewer.config,tooltip:Seadragon.Strings.getString("Tooltips.ZoomIn"),srcRest:this._resolveUrl(a.zoomIn.REST),srcGroup:this._resolveUrl(a.zoomIn.GROUP),srcHover:this._resolveUrl(a.zoomIn.HOVER),srcDown:this._resolveUrl(a.zoomIn.DOWN)},{onPress:d,onRelease:b,onClick:f,onEnter:d,onExit:b},null,null),j=$create(AjaxControlToolkit.Seadragon.Button,{config:this._viewer.config,tooltip:Seadragon.Strings.getString("Tooltips.ZoomOut"),srcRest:this._resolveUrl(a.zoomOut.REST),srcGroup:this._resolveUrl(a.zoomOut.GROUP),srcHover:this._resolveUrl(a.zoomOut.HOVER),srcDown:this._resolveUrl(a.zoomOut.DOWN)},{onPress:c,onRelease:b,onClick:e,onEnter:c,onExit:b},null,null),k=$create(AjaxControlToolkit.Seadragon.Button,{config:this._viewer.config,tooltip:Seadragon.Strings.getString("Tooltips.Home"),srcRest:this._resolveUrl(a.home.REST),srcGroup:this._resolveUrl(a.home.GROUP),srcHover:this._resolveUrl(a.home.HOVER),srcDown:this._resolveUrl(a.home.DOWN)},{onRelease:h},null,null),i=$create(AjaxControlToolkit.Seadragon.Button,{config:this._viewer.config,tooltip:Seadragon.Strings.getString("Tooltips.FullPage"),srcRest:this._resolveUrl(a.fullpage.REST),srcGroup:this._resolveUrl(a.fullpage.GROUP),srcHover:this._resolveUrl(a.fullpage.HOVER),srcDown:this._resolveUrl(a.fullpage.DOWN)},{onRelease:g},null,null);this._group=$create(AjaxControlToolkit.Seadragon.ButtonGroup,{config:this._viewer.config,buttons:[l,j,k,i]},null,null,null);this.elmt=this._group.get_element();this.elmt[SIGNAL]=true;this._viewer.add_open(Function.createDelegate(this,this._lightUp))},dispose:function(){},_resolveUrl:function(a){return String.format("{1}",this._viewer.get_prefixUrl(),a)},_beginZoomingIn:function(){this._lastZoomTime=(new Date).getTime();this._zoomFactor=this.config.zoomPerSecond;if(this._zoomFactor<=0)return;this._zooming=true;this._scheduleZoom()},_beginZoomingOut:function(){this._lastZoomTime=(new Date).getTime();this._zoomFactor=this.config.zoomPerSecond;if(this._zoomFactor<=0)return;this._zoomFactor=1/this._zoomFactor;this._zooming=true;this._scheduleZoom()},_endZooming:function(){this._zooming=false},_scheduleZoom:function(){window.setTimeout(Function.createDelegate(this,this._doZoom),10)},_doZoom:function(){if(this._zooming&&this._viewer.viewport){var a=(new Date).getTime(),c=a-this._lastZoomTime,b=Math.pow(this._zoomFactor,c/1000);this._viewer.viewport.zoomBy(b);this._viewer.viewport.applyConstraints();this._lastZoomTime=a;this._scheduleZoom()}},_doSingleZoomIn:function(){if(this._viewer.viewport){this._zooming=false;this._viewer.viewport.zoomBy(this.config.zoomPerClick/1);this._viewer.viewport.applyConstraints()}},_doSingleZoomOut:function(){if(this._viewer.viewport){this._zooming=false;this._viewer.viewport.zoomBy(1/this.config.zoomPerClick);this._viewer.viewport.applyConstraints()}},_lightUp:function(){this._group.emulateEnter();this._group.emulateExit()},_onHome:function(){if(this._viewer.viewport)this._viewer.viewport.goHome()},_onFullPage:function(){this._viewer.setFullPage(!this._viewer.isFullPage());this._group.emulateExit();if(this._viewer.viewport)this._viewer.viewport.applyConstraints()}};AjaxControlToolkit.Seadragon.NavControl.registerClass("AjaxControlToolkit.Seadragon.NavControl",null,Sys.IDisposable);AjaxControlToolkit.Seadragon.Control=function(c,b,a){this.elmt=c;this.anchor=b;this.container=a;this.wrapper=Seadragon.Utils.makeNeutralElement("span");this.initialize()};AjaxControlToolkit.Seadragon.Control.prototype={initialize:function(){this.wrapper=Seadragon.Utils.makeNeutralElement("span");this.wrapper.style.display="inline-block";this.wrapper.appendChild(this.elmt);if(this.anchor==Seadragon.ControlAnchor.NONE)this.wrapper.style.width=this.wrapper.style.height="100%";this.addToAnchor()},addToAnchor:function(){if(this.anchor==Seadragon.ControlAnchor.TOP_RIGHT||this.anchor==Seadragon.ControlAnchor.BOTTOM_RIGHT)this.container.insertBefore(this.elmt,this.container.firstChild);else this.container.appendChild(this.elmt)},destroy:function(){this.wrapper.removeChild(this.elmt);this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!="none"},setVisible:function(a){this.wrapper.style.display=a?"inline-block":"none"},setOpacity:function(a){if(this.elmt[SIGNAL]&&Seadragon.Utils.getBrowser()==Seadragon.Browser.IE)Seadragon.Utils.setElementOpacity(this.elmt,a,true);else Seadragon.Utils.setElementOpacity(this.wrapper,a,true)}};AjaxControlToolkit.Seadragon.Control.registerClass("AjaxControlToolkit.Seadragon.Control",null,Sys.IDisposable);AjaxControlToolkit.Seadragon.Viewer=function(a){AjaxControlToolkit.Seadragon.Viewer.initializeBase(this,[a]);this.config=new AjaxControlToolkit.Seadragon.Config;this._prefixUrl=null;this._controls=[];this._customControls=null;this._overlays=[];this._overlayControls=null;this._container=null;this._canvas=null;this._controlsTL=null;this._controlsTR=null;this._controlsBR=null;this._controlsBL=null;this._bodyWidth=null;this._bodyHeight=null;this._bodyOverflow=null;this._docOverflow=null;this._fsBoundsDelta=null;this._prevContainerSize=null;this._lastOpenStartTime=0;this._lastOpenEndTime=0;this._animating=false;this._forceRedraw=false;this._mouseInside=false;this._xmlPath=null;this.source=null;this.drawer=null;this.viewport=null;this.profiler=null};AjaxControlToolkit.Seadragon.Viewer.prototype={initialize:function(){AjaxControlToolkit.Seadragon.Viewer.callBaseMethod(this,"initialize");this._container=Seadragon.Utils.makeNeutralElement("div");this._canvas=Seadragon.Utils.makeNeutralElement("div");this._controlsTL=Seadragon.Utils.makeNeutralElement("div");this._controlsTR=Seadragon.Utils.makeNeutralElement("div");this._controlsBR=Seadragon.Utils.makeNeutralElement("div");this._controlsBL=Seadragon.Utils.makeNeutralElement("div");var c=new Seadragon.MouseTracker(this._canvas,this.config.clickTimeThreshold,this.config.clickDistThreshold),d=new Seadragon.MouseTracker(this._container,this.config.clickTimeThreshold,this.config.clickDistThreshold);this._bodyWidth=document.body.style.width;this._bodyHeight=document.body.style.height;this._bodyOverflow=document.body.style.overflow;this._docOverflow=document.documentElement.style.overflow;this._fsBoundsDelta=new AjaxControlToolkit.Seadragon.Point(1,1);var b=this._canvas.style,a=this._container.style,h=this._controlsTL.style,i=this._controlsTR.style,g=this._controlsBR.style,f=this._controlsBL.style;a.width="100%";a.height="100%";a.position="relative";a.left="0px";a.top="0px";a.textAlign="left";b.width="100%";b.height="100%";b.overflow="hidden";b.position="absolute";b.top="0px";b.left="0px";h.position=i.position=g.position=f.position="absolute";h.top=i.top="0px";h.left=f.left="0px";i.right=g.right="0px";f.bottom=g.bottom="0px";c.clickHandler=Function.createDelegate(this,this._onCanvasClick);c.dragHandler=Function.createDelegate(this,this._onCanvasDrag);c.releaseHandler=Function.createDelegate(this,this._onCanvasRelease);c.setTracking(true);if(this.get_showNavigationControl()){navControl=(new AjaxControlToolkit.Seadragon.NavControl(this)).elmt;navControl.style.marginRight="4px";navControl.style.marginBottom="4px";this.addControl(navControl,AjaxControlToolkit.Seadragon.ControlAnchor.BOTTOM_RIGHT)}for(var e=0;e<this._customControls.length;e++)this.addControl(this._customControls[e].id,this._customControls[e].anchor);d.enterHandler=Function.createDelegate(this,this._onContainerEnter);d.exitHandler=Function.createDelegate(this,this._onContainerExit);d.releaseHandler=Function.createDelegate(this,this._onContainerRelease);d.setTracking(true);window.setTimeout(Function.createDelegate(this,this._beginControlsAutoHide),1);this._container.appendChild(this._canvas);this._container.appendChild(this._controlsTL);this._container.appendChild(this._controlsTR);this._container.appendChild(this._controlsBR);this._container.appendChild(this._controlsBL);this.get_element().appendChild(this._container);if(this._xmlPath)this.openDzi(this._xmlPath)},_raiseEvent:function(c,a){var b=this.get_events().getHandler(c);if(b){if(!a)a=Sys.EventArgs.Empty;b(this,a)}},_beginControlsAutoHide:function(){if(!this.config.autoHideControls)return;this._controlsShouldFade=true;this._controlsFadeBeginTime=(new Date).getTime()+this._controlsFadeDelay;window.setTimeout(Function.createDelegate(this,this._scheduleControlsFade),this._controlsFadeDelay)},_scheduleControlsFade:function(){window.setTimeout(Function.createDelegate(this,this._updateControlsFade),20)},_updateControlsFade:function(){if(this._controlsShouldFade){var c=(new Date).getTime(),d=c-this._controlsFadeBeginTime,a=1-d/this._controlsFadeLength;a=Math.min(1,a);a=Math.max(0,a);for(var b=this._controls.length-1;b>=0;b--)this._controls[b].setOpacity(a);if(a>0)this._scheduleControlsFade()}},_onCanvasClick:function(f,b,d,e){if(this.viewport&&d){var a=this.config.zoomPerClick,c=e?1/a:a;this.viewport.zoomBy(c,this.viewport.pointFromPixel(b,true));this.viewport.applyConstraints()}},_onCanvasDrag:function(c,b,a){if(this.viewport)this.viewport.panBy(this.viewport.deltaPointsFromPixels(a.negate()))},_onCanvasRelease:function(d,c,a){if(a&&this.viewport)this.viewport.applyConstraints()},_onContainerExit:function(d,c,a){if(!a){this._mouseInside=false;if(!this._animating)this._beginControlsAutoHide()}},_onContainerRelease:function(d,c,b,a){if(!a){this._mouseInside=false;if(!this._animating)this._beginControlsAutoHide()}},_getControlIndex:function(b){for(var a=this._controls.length-1;a>=0;a--)if(this._controls[a].elmt==b)return a;return -1},_abortControlsAutoHide:function(){this._controlsShouldFade=false;for(var a=this._controls.length-1;a>=0;a--)this._controls[a].setOpacity(1)},_onContainerEnter:function(){this._mouseInside=true;this._abortControlsAutoHide()},_updateOnce:function(){if(!this.source)return;this.profiler.beginUpdate();var b=Seadragon.Utils.getElementSize(this._container);if(!b.equals(this._prevContainerSize)){this.viewport.resize(b,true);this._prevContainerSize=b;this._raiseEvent("resize",this)}var a=this.viewport.update();if(!this._animating&&a){this._raiseEvent("animationstart",self);this._abortControlsAutoHide()}if(a){this.drawer.update();this._raiseEvent("animation",self)}else if(this._forceRedraw||this.drawer.needsUpdate()){this.drawer.update();this._forceRedraw=false}else this.drawer.idle();if(this._animating&&!a){this._raiseEvent("animationfinish",this);if(!this._mouseInside)this._beginControlsAutoHide()}this._animating=a;this.profiler.endUpdate()},_onClose:function(){this.source=null;this.viewport=null;this.drawer=null;this.profiler=null;this._canvas.innerHTML=""},_beforeOpen:function(){if(this.source)this._onClose();this._lastOpenStartTime=(new Date).getTime();window.setTimeout(Function.createDelegate(this,function(){if(this._lastOpenStartTime>this._lastOpenEndTime)this._setMessage(Seadragon.Strings.getString("Messages.Loading"))}),2000);return this._lastOpenStartTime},_setMessage:function(c){var b=document.createTextNode(c);this._canvas.innerHTML="";this._canvas.appendChild(Seadragon.Utils.makeCenteredNode(b));var a=b.parentNode.style;a.color="white";a.fontFamily="verdana";a.fontSize="13px";a.fontSizeAdjust="none";a.fontStyle="normal";a.fontStretch="normal";a.fontVariant="normal";a.fontWeight="normal";a.lineHeight="1em";a.textAlign="center";a.textDecoration="none"},_onOpen:function(e,c,d){this._lastOpenEndTime=(new Date).getTime();if(e<this._lastOpenStartTime){Seadragon.Debug.log("Ignoring out-of-date open.");this._raiseEvent("ignore");return}else if(!c){this._setMessage(d);this._raiseEvent("error");return}this._canvas.innerHTML="";this._prevContainerSize=Seadragon.Utils.getElementSize(this._container);this.source=c;this.viewport=new AjaxControlToolkit.Seadragon.Viewport(this._prevContainerSize,this.source.dimensions,this.config);this.drawer=new AjaxControlToolkit.Seadragon.Drawer(this.source,this.viewport,this._canvas);this.profiler=new AjaxControlToolkit.Seadragon.Profiler;this._animating=false;this._forceRedraw=true;this._scheduleUpdate(this._updateMulti);for(var b=0;b<this._overlayControls.length;b++){var a=this._overlayControls[b];if(a.point!=null)this.drawer.addOverlay(a.id,new AjaxControlToolkit.Seadragon.Point(a.point.X,a.point.Y),AjaxControlToolkit.Seadragon.OverlayPlacement.TOP_LEFT);else this.drawer.addOverlay(a.id,new AjaxControlToolkit.Seadragon.Rect(a.rect.Point.X,a.rect.Point.Y,a.rect.Width,a.rect.Height),a.placement)}this._raiseEvent("open")},_scheduleUpdate:function(c,a){if(this._animating)return window.setTimeout(Function.createDelegate(this,c),1);var b=(new Date).getTime(),a=a?a:b,d=a+1000/60,e=Math.max(1,d-b);return window.setTimeout(Function.createDelegate(this,c),e)},_updateMulti:function(){if(!this.source)return;var a=(new Date).getTime();this._updateOnce();this._scheduleUpdate(arguments.callee,a)},_updateOnce:function(){if(!this.source)return;this.profiler.beginUpdate();var b=Seadragon.Utils.getElementSize(this._container);if(!b.equals(this._prevContainerSize)){this.viewport.resize(b,true);this._prevContainerSize=b;this._raiseEvent("resize")}var a=this.viewport.update();if(!this._animating&&a){this._raiseEvent("animationstart");this._abortControlsAutoHide()}if(a){this.drawer.update();this._raiseEvent("animation")}else if(this._forceRedraw||this.drawer.needsUpdate()){this.drawer.update();this._forceRedraw=false}else this.drawer.idle();if(this._animating&&!a){this._raiseEvent("animationfinish");if(!this._mouseInside)this._beginControlsAutoHide()}this._animating=a;this.profiler.endUpdate()},getNavControl:function(){return this._navControl},get_xmlPath:function(){return this._xmlPath},set_xmlPath:function(a){this._xmlPath=a},get_debugMode:function(){return this.config.debugMode},set_debugMode:function(a){this.config.debugMode=a},get_animationTime:function(){return this.config.animationTime},set_animationTime:function(a){this.config.animationTime=a},get_blendTime:function(){return this.config.blendTime},set_blendTime:function(a){this.config.blendTime=a},get_alwaysBlend:function(){return this.config.alwaysBlend},set_alwaysBlend:function(a){this.config.alwaysBlend=a},get_autoHideControls:function(){return this.config.autoHideControls},set_autoHideControls:function(a){this.config.autoHideControls=a},get_immediateRender:function(){return this.config.immediateRender},set_immediateRender:function(a){this.config.immediateRender=a},get_wrapHorizontal:function(){return this.config.wrapHorizontal},set_wrapHorizontal:function(a){this.config.wrapHorizontal=a},get_wrapVertical:function(){return this.config.wrapVertical},set_wrapVertical:function(a){this.config.wrapVertical=a},get_minZoomDimension:function(){return this.config.minZoomDimension},set_minZoomDimension:function(a){this.config.minZoomDimension=a},get_maxZoomPixelRatio:function(){return this.config.maxZoomPixelRatio},set_maxZoomPixelRatio:function(a){this.config.maxZoomPixelRatio=a},get_visibilityRatio:function(){return this.config.visibilityRatio},set_visibilityRatio:function(a){this.config.visibilityRatio=a},get_springStiffness:function(){return this.config.springStiffness},set_springStiffness:function(a){this.config.springStiffness=a},get_imageLoaderLimit:function(){return this.config.imageLoaderLimit},set_imageLoaderLimit:function(a){this.config.imageLoaderLimit=a},get_clickTimeThreshold:function(){return this.config.clickTimeThreshold},set_clickTimeThreshold:function(a){this.config.clickTimeThreshold=a},get_clickDistThreshold:function(){return this.config.clickDistThreshold},set_clickDistThreshold:function(a){this.config.clickDistThreshold=a},get_zoomPerClick:function(){return this.config.zoomPerClick},set_zoomPerClick:function(a){this.config.zoomPerClick=a},get_zoomPerSecond:function(){return this.config.zoomPerSecond},set_zoomPerSecond:function(a){this.config.zoomPerSecond=a},get_maxImageCacheCount:function(){return this.config.maxImageCacheCount},set_maxImageCacheCount:function(a){this.config.maxImageCacheCount=a},get_showNavigationControl:function(){return this.config.showNavigationControl},set_showNavigationControl:function(a){this.config.showNavigationControl=a},get_minPixelRatio:function(){return this.config.minPixelRatio},set_minPixelRatio:function(a){this.config.minPixelRatio=a},get_mouseNavEnabled:function(){return this.config.mouseNavEnabled},set_mouseNavEnabled:function(a){this.config.mouseNavEnabled=a},get_controls:function(){return this._customControls},set_controls:function(a){this._customControls=a},get_overlays:function(){return this._overlayControls},set_overlays:function(a){this._overlayControls=a},get_prefixUrl:function(){return this._prefixUrl},set_prefixUrl:function(a){this._prefixUrl=a},add_open:function(a){this.get_events().addHandler("open",a)},remove_open:function(a){this.get_events().removeHandler("open",a)},add_error:function(a){this.get_events().addHandler("error",a)},remove_error:function(a){this.get_events().removeHandler("error",a)},add_ignore:function(a){this.get_events().addHandler("ignore",a)},remove_ignore:function(a){this.get_events().removeHandler("ignore",a)},add_resize:function(a){this.get_events().addHandler("resize",a)},remove_resize:function(a){this.get_events().removeHandler("resize",a)},add_animationstart:function(a){this.get_events().addHandler("animationstart",a)},remove_animationstart:function(a){this.get_events().removeHandler("animationstart",a)},add_animationend:function(a){this.get_events().addHandler("animationend",a)},remove_animationend:function(a){this.get_events().removeHandler("animationend",a)},addControl:function(a,c){var a=Seadragon.Utils.getElement(a);if(this._getControlIndex(a)>=0)return;var b=null;switch(c){case AjaxControlToolkit.Seadragon.ControlAnchor.TOP_RIGHT:b=this._controlsTR;a.style.position="relative";break;case AjaxControlToolkit.Seadragon.ControlAnchor.BOTTOM_RIGHT:b=this._controlsBR;a.style.position="relative";break;case AjaxControlToolkit.Seadragon.ControlAnchor.BOTTOM_LEFT:b=this._controlsBL;a.style.position="relative";break;case AjaxControlToolkit.Seadragon.ControlAnchor.TOP_LEFT:b=this._controlsTL;a.style.position="relative";break;case AjaxControlToolkit.Seadragon.ControlAnchor.NONE:default:b=this._container;a.style.position="absolute"}this._controls.push(new AjaxControlToolkit.Seadragon.Control(a,c,b))},isOpen:function(){return !!this.source},openDzi:function(c,b){var a=this._beforeOpen();AjaxControlToolkit.Seadragon.DziTileSourceHelper.createFromXml(c,b,Seadragon.Utils.createCallback(null,Function.createDelegate(this,this._onOpen),a))},openTileSource:function(b){var a=beforeOpen();window.setTimeout(Function.createDelegate(this,function(){onOpen(a,b)}),1)},close:function(){if(!this.source)return;this._onClose()},removeControl:function(b){var b=Seadragon.Utils.getElement(b),a=this._getControlIndex(b);if(a>=0){this._controls[a].destroy();this._controls.splice(a,1)}},clearControls:function(){while(this._controls.length>0)this._controls.pop().destroy()},isDashboardEnabled:function(){for(var a=this._controls.length-1;a>=0;a--)if(this._controls[a].isVisible())return true;return false},isFullPage:function(){return this._container.parentNode==document.body},isMouseNavEnabled:function(){return this._innerTracker.isTracking()},isVisible:function(){return this._container.style.visibility!="hidden"},setDashboardEnabled:function(b){for(var a=this._controls.length-1;a>=0;a--)this._controls[a].setVisible(b)},setFullPage:function(e){if(e==this.isFullPage())return;var h=document.body,a=h.style,d=document.documentElement.style,b=this._container.style,c=this._canvas.style;if(e){bodyOverflow=a.overflow;docOverflow=d.overflow;a.overflow="hidden";d.overflow="hidden";bodyWidth=a.width;bodyHeight=a.height;a.width="100%";a.height="100%";c.backgroundColor="black";c.color="white";b.position="fixed";b.zIndex="99999999";h.appendChild(this._container);this._prevContainerSize=Seadragon.Utils.getWindowSize();this._onContainerEnter()}else{a.overflow=bodyOverflow;d.overflow=docOverflow;a.width=bodyWidth;a.height=bodyHeight;c.backgroundColor="";c.color="";b.position="relative";b.zIndex="";this.get_element().appendChild(this._container);this._prevContainerSize=Seadragon.Utils.getElementSize(this.get_element());this._onContainerExit()}if(this.viewport){var g=this.viewport.getBounds();this.viewport.resize(this._prevContainerSize);var f=this.viewport.getBounds();if(e)this._fsBoundsDelta=new AjaxControlToolkit.Seadragon.Point(f.width/g.width,f.height/g.height);else{this.viewport.update();this.viewport.zoomBy(Math.max(this._fsBoundsDelta.x,this._fsBoundsDelta.y),null,true)}this._forceRedraw=true;this._raiseEvent("resize",this);this._updateOnce()}},setMouseNavEnabled:function(a){this._innerTracker.setTracking(a)},setVisible:function(a){this._container.style.visibility=a?"":"hidden"}};AjaxControlToolkit.Seadragon.Viewer.registerClass("AjaxControlToolkit.Seadragon.Viewer",Sys.UI.Control)